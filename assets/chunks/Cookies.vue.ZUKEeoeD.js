import{d as w,h as g,o as r,b as h,w as d,j as b,p as S,q as I,G as m,a as x,k as C,v as K,Y as O,c as N,F as R,C as G,Z as L}from"./framework.D4KI3xLP.js";import{a as P}from"./EmptyState.vue.BBwbqFUd.js";import{m as Y,g as Z}from"./DeleteSidebarListElement.vue.B1JUgoQh.js";import{_ as q,f as z}from"./SidebarListElement.vue.C4aktEyF.js";import{x as T,a as W}from"./ViewLayoutContent.vue.CCvsHqn-.js";import{F as U,D,U as H,V as J,C as Q,G as X,ac as ee,aC as ae,aR as oe}from"../api_explorer.md.GsGzUyls.js";import{E as le}from"./Form.vue.BQkNi1QD.js";import{h as se,b as V}from"./CommandActionInput.vue.DRpbYwmp.js";const te=w({__name:"CookieForm",setup(y){const{activeCookieId:u}=U(),{cookies:v,cookieMutators:p}=D(),a=[{label:"Name",key:"name",placeholder:"session_id"},{label:"Value",key:"value",placeholder:"my-cookie-session-id"},{label:"Domain",key:"domain",placeholder:"example.com"}],c=g(()=>v[u.value]||{uid:"",name:"",value:"",domain:"",path:""}),_=(s,e)=>{u.value&&p.edit(u.value,s,e)};return(s,e)=>(r(),h(le,{data:c.value,onUpdate:_,options:a},{title:d(()=>e[0]||(e[0]=[b("span",{class:"text-c-2"},"Edit Cookie",-1)])),_:1},8,["data"]))}}),ie={class:"flex gap-2 h-8 items-start text-sm"},ue={class:"flex gap-2 h-8 items-start text-sm"},ne={class:"flex gap-2 h-8 items-start text-sm"},de=w({__name:"CookieModal",props:{state:{}},emits:["cancel","submit"],setup(y,{emit:u}){const v=y,p=u,a=S({name:"",value:"",domain:""}),{toast:c}=J(),_=()=>{if(!a.value.name||!a.value.value){c("Please fill in all fields before adding a cookie.","error");return}p("submit",a.value),v.state.hide()};return I(()=>v.state.open,s=>{s&&(a.value={name:"",value:"",domain:""})}),(s,e)=>(r(),h(C(H),{size:"xs",state:s.state,title:"Add Cookie"},{default:d(()=>[m(se,{disabled:!a.value.name||!a.value.value,onCancel:e[3]||(e[3]=n=>p("cancel")),onSubmit:_},{submit:d(()=>e[7]||(e[7]=[x("Add Cookie")])),default:d(()=>[b("div",ie,[e[4]||(e[4]=x(" Name: ")),m(V,{modelValue:a.value.name,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value.name=n),autofocus:"",class:"!p-0",placeholder:"session_id"},null,8,["modelValue"])]),b("div",ue,[e[5]||(e[5]=x(" Value: ")),m(V,{modelValue:a.value.value,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value.value=n),autofocus:"",class:"!p-0",placeholder:"my-cookie-session-id"},null,8,["modelValue"])]),b("div",ne,[e[6]||(e[6]=x(" Domain: ")),m(V,{modelValue:a.value.domain,"onUpdate:modelValue":e[2]||(e[2]=n=>a.value.domain=n),autofocus:"",class:"!p-0",placeholder:"example.com"},null,8,["modelValue"])])]),_:1},8,["disabled"])]),_:1},8,["state"]))}}),ce=Q(de,[["__scopeId","data-v-c25da223"]]),me={class:"flex-1"},re={class:"mb-[.5px] last:mb-0 relative"},Ce=w({__name:"Cookies",setup(y){const{cookies:u,cookieMutators:v,events:p,workspaceMutators:a}=D(),{activeWorkspace:c,activeCookieId:_}=U(),s=X(),e=ee(),n=ae(),B=l=>{var t,o;const i=oe.parse({name:l.name,value:l.value,domain:l.domain,path:"/"});v.add(i),a.edit(((t=c.value)==null?void 0:t.uid)??"","cookies",[...((o=c.value)==null?void 0:o.cookies)??[],i.uid]),s.push({name:"cookies",params:{cookies:i.uid}})},E=l=>{var t,o,i;v.delete(l),a.edit(((t=c.value)==null?void 0:t.uid)??"","cookies",[...(((o=c.value)==null?void 0:o.cookies)??[]).filter(f=>f!==l)]);const k=Object.values(u).filter(f=>f.uid!==l);if(k.length>1){const f=k[k.length-1];f&&s.push(f.uid)}else k.length===1&&((i=k[0])==null?void 0:i.uid)==="default"&&s.push("default")},$=()=>{n.show()},M=l=>{l!=null&&l.createNew&&e.name==="cookies"&&$()},j=(l,t)=>{var o;const i={name:"cookies",params:{workspace:((o=c.value)==null?void 0:o.uid)??"default",cookies:t}};if(l.metaKey){const k=s.resolve(i).href;window.open(k,"_blank");return}s.push(i)};K(()=>p.hotKeys.on(M)),O(()=>p.hotKeys.off(M));const A=g(()=>u[_.value]),F=g(()=>Object.keys(u).length>0&&A.value);return(l,t)=>(r(),h(W,null,{default:d(()=>[m(C(Y),{title:"Cookies"},{content:d(()=>[b("div",me,[m(q,null,{default:d(()=>[(r(!0),N(R,null,G(Object.values(C(u)),o=>(r(),N("li",{key:o.uid,class:"flex flex-col gap-1/2"},[b("div",re,[(r(),h(z,{key:o.uid,class:"text-xs",isDeletable:"",type:"cookies",variable:{name:o.name,uid:o.uid},warningMessage:"Are you sure you want to delete this cookie?",onClick:L(i=>j(i,o.uid),["prevent"]),onDelete:i=>E(o.uid)},null,8,["variable","onClick","onDelete"]))])]))),128))]),_:1})])]),button:d(()=>[m(Z,{click:$,hotkey:"N"},{title:d(()=>t[1]||(t[1]=[x("Add Cookie")])),_:1})]),_:1}),m(T,{class:"flex-1"},{default:d(()=>[F.value?(r(),h(te,{key:0})):(r(),h(P,{key:1}))]),_:1}),m(ce,{state:C(n),onCancel:t[0]||(t[0]=o=>C(n).hide()),onSubmit:B},null,8,["state"])]),_:1}))}});export{Ce as default};
